<html>
	<head>
		<meta charset="utf-8">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
		<![if !IE]>
		<script type="text/javascript" src="../lib/jquery-1.8.3.min.js"></script>
		
		<script type="text/javascript" src="../lib/iscroll.js"></script>
		<script type="text/javascript" src="../lib/jquery.freetile.min.js"></script>
		<script type="text/javascript" src="../lib/jquery.transit.js"></script>
		<script type="text/javascript" src="../lib/hammer.min.js"></script>
		<script type="text/javascript" src="../lib/jquery.hammer.min.js"></script>

		<script type="text/javascript" src="newsParser.js"></script>
		<script type="text/javascript" src="itembuilder.js"></script>
		<script type="text/javascript" src="functions.js"></script>
		<script type="text/javascript" src="toolbar.js"></script>
		<script type="text/javascript" src="gridmenu.js"></script>
		
		<script type="text/javascript" src="rupu.js"></script>
		<script type="text/javascript"> var browser=true;</script>
		
		<link rel="stylesheet" type="text/css" href="rupu.css"></link>
		<link rel="stylesheet" type="text/css" href="toolbar.css"></link>
		<link rel="stylesheet" type="text/css" href="item.css"></link>
		<link rel="stylesheet" type="text/css" href="page.css"></link>
		<link rel="stylesheet" type="text/css" href="gridmenu.css"></link>

		<![endif]>
		<!--[if IE]>
		<script type="text/javascript"> var browser=false;</script>
		<![endif]-->
	</head>



	<script type="text/javascript">




	if (!browser){
		document.write('Internet explorer not supported.');
	} else {
		$(function(){
			$('#main-container').css('opacity',0);

			var rp = new rupu();
			rp.start('#main-container');
			
			rp.on('load',function(){
				$('#startup-screen').transit({'opacity':0},1500,function(){
					$(this).remove();
				});
				$('#main-container').transit({'opacity':1},1500);
			});

			rp.getDatesList(function(list){
				each(list,function(item){
					item._id = item.date;
					item.largetext = item.date;
					item.smalltext = item.count;
				});

				var gm = new gridMenu('date-menu');
				$('body').prepend(gm.getElement());

				gm.addButton({
					largetext:'ok',
					smalltext:'accept selection',
					_id:'return'
				});
				gm.addButton({
					largetext:'clear',
					smalltext:'deselect',
					_id:'deselect'
				});				

				gm.addButton(list);
				gm.setSize(window.innerWidth,window.innerHeight);
				gm.setOption('selectMany',true);

				
				gm.eachButton(function(btn){
					btn.setBackgroundColor( bg[ dateParser.getMonth(btn.getId()) ] || bg.default);
				});

				gm.on('click',function(id,btn){
					if (id=='return'){
															
						rp.getNews( gm.getSelectedId() ,false);

						gm.getElement().remove();
						
					} else if (id=='deselect'){
						gm.clear();
					} else {						
						gm.toggleButton(btn);
					}
				});

				
			});
		});
	}

	

	</script>

<body>	
	<!--
	<div id="startup-screen">
		<h1 class="startup">dmo</h1>
	</div>
	-->
	<div id="main-container">	
		

	</div>

</body>

</html>
